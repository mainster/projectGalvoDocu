<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>XY-GalvoScanner: IRQ_Handler_Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="xyConfCrop.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">XY-GalvoScanner
   &#160;<span id="projectnumber">1.4</span>
   </div>
   <div id="projectbrief">Galvanometer based, hybrid compensator controlled effect-laser system.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a01259.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">IRQ_Handler_Functions<div class="ingroups"><a class="el" href="a01230.html">MD_Application</a> &raquo; <a class="el" href="a01255.html">IRQ Handler</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for IRQ_Handler_Functions:</div>
<div class="dyncontent">
<center><table><tr><td><div class="center"><iframe scrolling="no" frameborder="0" src="a01259.svg" width="316" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4bfbdc85c5337782d112b383c6d0efbd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01259.html#ga4bfbdc85c5337782d112b383c6d0efbd">DMA2_STREAM_0_IRQ_Handler</a> (void)</td></tr>
<tr class="memdesc:ga4bfbdc85c5337782d112b383c6d0efbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">DMA Channel 2 Stream 0 transmission complete IRQ handler.  <a href="#ga4bfbdc85c5337782d112b383c6d0efbd">More...</a><br /></td></tr>
<tr class="separator:ga4bfbdc85c5337782d112b383c6d0efbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa7f5812197da97d8b62c5d62396dbbc4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa7f5812197da97d8b62c5d62396dbbc4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>TIM2_IRQ_Handler</b> (void)</td></tr>
<tr class="separator:gaa7f5812197da97d8b62c5d62396dbbc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3e965ca8f413e014ad3a4e27b6b7c0bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01259.html#ga3e965ca8f413e014ad3a4e27b6b7c0bc">TIM4_IRQ_Handler</a> (void)</td></tr>
<tr class="memdesc:ga3e965ca8f413e014ad3a4e27b6b7c0bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer 4 overrun IRQ callback.  <a href="#ga3e965ca8f413e014ad3a4e27b6b7c0bc">More...</a><br /></td></tr>
<tr class="separator:ga3e965ca8f413e014ad3a4e27b6b7c0bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9a7d2b1783e9106040117270d0195759"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01259.html#ga9a7d2b1783e9106040117270d0195759">ADC_IRQ_Handler</a> (void)</td></tr>
<tr class="memdesc:ga9a7d2b1783e9106040117270d0195759"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analog to digital converter IRQ callback handler.  <a href="#ga9a7d2b1783e9106040117270d0195759">More...</a><br /></td></tr>
<tr class="separator:ga9a7d2b1783e9106040117270d0195759"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga9a7d2b1783e9106040117270d0195759"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ADC_IRQ_Handler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="a00438.html">irq_callbacks.h</a>&gt;</code></p>

<p>Analog to digital converter IRQ callback handler. </p>
<p>Provides realtime service functionality to handle discretization process of the closed-loop position feedback signal.</p>
<dl class="section note"><dt>Note</dt><dd>For in-depth documentation of the analog subsystem, refer to [LINK MARKDOWN CHAPTER]</dd></dl>
<div class="fragment"><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">     * @brief      End of conversion interrupt occured.</span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     *             In normal processing, this line never should be reached and</span></div><div class="line"><span class="comment">     *             must treated as error state!</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00028.html#gaa12546e51ec905c90a3aada432bd4633">ADC_GetFlagStatus</a>(ADC1, ADC_FLAG_EOC) == SET) {</div><div class="line">        <a class="code" href="a00028.html#ga601c6a67bd883eb631ecc7aa5e999b9c">ADC_ClearITPendingBit</a>(ADC1, ADC_IT_EOC);</div><div class="line"></div><div class="line">        <a class="code" href="a01225.html#ga6b5a90b17dfa80cdfc7e9415b373b7e4">MD_DISCO_LedOn</a>(LED_ALL);</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div></div><!-- fragment --><p> <a class="anchor" id="AnalogWatchdogIntHandler"></a><a class="anchor" id="ADC_EndOfConversionIntHandler"></a></p>
<p>[ADC_IRQ_Flag_Handling]</p>
<p>[ADC_IRQ_Flag_Handling]</p>
<p>Check if an analog watchdog interrupt has been requested. </p><pre class="fragment">        In case of an analog watchdog interrupt has occured, it must
        be determined wether if the ASG systems fuse has to be
        triggerd or if only the out-of-range integrator must be
        partially charged.
</pre><p>Check ASG out-of-range integrator for limit violations in upper and lower direction.</p>
<p>Set ASG into "tripped" state.</p>
<p>Swap DAC output-register-write function pointer reference to the "ASG tripped" handler DAC_SetDualChanSigned_Tripped</p>
<p>If the ASG system isn't already registered to charge the integrator (ASG_CHARGING_INTEGRATOR), alter the ASG state correspondingly.</p>
<p>Charge integrator since this is the analog watchdog branch where the tripping limit has not been reached yet.</p>

<p>Definition at line <a class="el" href="a00437_source.html#l00261">261</a> of file <a class="el" href="a00437_source.html">irq_callbacks.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a01259_ga9a7d2b1783e9106040117270d0195759_cgraph.svg" width="599" height="155"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga4bfbdc85c5337782d112b383c6d0efbd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DMA2_STREAM_0_IRQ_Handler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="a00438.html">irq_callbacks.h</a>&gt;</code></p>

<p>DMA Channel 2 Stream 0 transmission complete IRQ handler. </p>
<p>PID: This callback provides compensator calculation. </p>
<dl class="section user"><dt>First half of ADC group:</dt><dd>Add code here to process the first half of ADC group scan-buffer It's good to call the X-channel PID instance some cycles earlier. There is nothing wrong under the condition that both compensator outputs are passed to DAC queue at the same time!</dd></dl>
<dl class="section user"><dt>Process Y-channel position signal here:</dt><dd>If the Y-PID instance has processed the y position, call the dualSecureActuator update function to hold the discrete deadtime at a minimum. BEFOR updating the DAC, assure you that this is not a nested call of a running x-channel pid algorithm !!! Maybe the NVIC prioritys could help for this?!</dd></dl>
<dl class="section user"><dt>Analog balanced position signal:</dt><dd>The analog balanced position signal must be set before the AD conversion positive offset due to the input voltage range of the integrated ADC cells. Analogously, the sym. Pos. Signal is then changed to AREF / 2 Pushed upwards. Here, the offset is digitally subtracted again Controller-internal with symmetrical sequences can be worked. The same applies to the DAC hardware, the + offset (from before ADC) Thus subtracted analogously again after the DA converter. Therefore, Balanced signal before describing the DAC data hold register AREF / 2.</dd></dl>
<dl class="section user"><dt>Direct memory access to array  ADC_MultiConvBuff:</dt><dd>Take a copy of direct-memory-accessed array ADC_MultiConvBuff up to this point, the access macros <a class="el" href="a01261.html#ga0c02531a88932d1e19ef31aaeb5f3850">SETPOINT_Y_FLOAT</a>, <a class="el" href="a01261.html#ga4de825aff4a57d60291667de0e2f627c">POS_Y_FLOAT</a> ... also holds the new values</dd></dl>
<p>Invoke PID calculation and trigger TicToc Tic.</p>
<p>Trigger TicToc Toc.</p>

<p>Definition at line <a class="el" href="a00437_source.html#l00099">99</a> of file <a class="el" href="a00437_source.html">irq_callbacks.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a01259_ga4bfbdc85c5337782d112b383c6d0efbd_cgraph.svg" width="443" height="240"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3e965ca8f413e014ad3a4e27b6b7c0bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TIM4_IRQ_Handler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="a00438.html">irq_callbacks.h</a>&gt;</code></p>

<p>Timer 4 overrun IRQ callback. </p>
<p>Provides waveform generation as a part of . </p>
<p>Check if line1 or line2 waveform is currently active or not.</p>
<p>Calculate vector array row count.</p>

<p>Definition at line <a class="el" href="a00437_source.html#l00342">342</a> of file <a class="el" href="a00437_source.html">irq_callbacks.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a01259_ga3e965ca8f413e014ad3a4e27b6b7c0bc_cgraph.svg" width="539" height="240"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Feb 10 2017 02:37:45 for XY-GalvoScanner by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
